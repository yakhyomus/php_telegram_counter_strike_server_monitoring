# Мониторинг бот сервера Counter Strike 1.6 на PHP

Загружаем все на хостинг с поддержкой PHP (5.6)

Создаем бота в Telegram через @BotFather
1. Ищем в поиске @BotFather
2. Запускаем и отправляем комманду /newbot
3. Придумываем название для бота
4. Придумываем юзернейм для бота (в конце должно быть bot, например yacs_uzbot)

После выполнения всех этих пунктов @BotFather вам выдаст токен, примерно такой:
1234567890:AAF5xIKym1J5mqkpE1JL-w32rrSp8khNKF0

Скопируем его и вставляем в config.php однвременно настраивая его.

$token = 'TOKEN'; // Пишем сюда токен который вы получили через @BotFather
$command = '/info'; // Команда на которую будет реагировать ваш бот
$ip = '123.123.123.123'; // IP вашего сервера
$port = '27015'; //Порт вашего сервера


# Связываем бота с приложением\сайтом

После подключения библиотеки нужно организовать взаимодействие бота с вашим сайтом\приложением. Организовать это взаимодействие можно с помощью вебхуков.

Вебхук — это своего рода ретранслятор, который все запросы от бота будет передавать на адрес, указанный при регистрации вебхука. 
Зарегистрировать вебхук очень просто, нужно просто через любой браузер отправить запрос вида 

# https://api.telegram.org/bot~token~/setWebhook?url=https://example.ru/path

где https: //example.ru/ — это ссылка на ваш сайт, куда будет перенаправлять бот запросы.
~token~ — это токен, который вы получили при регистрации своего бота.
example.ru заменяем на адрес вашего сайта
path — это часть url, на которую будут приходить обращения.

И вот именно тут возникает проблема. Оказывается вебхук можно зарегистрировать только в случае, если сайт находится на https. Если же ваш сайт на http, то зарегистрировать вебхук вам не получится.

В ISP Manager можно за два клика бесплатно получить SSL сертефикат на любой домен от Let's Encrypt.

После отправки запроса мы получаем ответ в виде:

{"ok":true,"result":true,"description":"Webhook was set"}

После переходим к вашему боту в Telegram, у меня @yacs_uzbot, запускаем и отправляем комманду, в моем случае это /info
И все готово :)
